# ISI v0.1 — Formal Model Specification

> **Status:** FROZEN  
> **Version:** v0.1  
> **Date:** 2025-07-11  
> **Scope:** EU-27 (Eurostat convention: Greece = `EL`)  
> **Reference window:** 2022–2024 (axis-specific; see §3)  
> **Generated by:** `export_isi_backend_v01.py`

This document is the canonical methodology freeze for the International
Sovereignty Index, version 0.1. It is the single source of truth for the
composite formula, axis definitions, data sources, normalization rules,
missing-data handling, zero-score semantics, and API response schemas.
No downstream artefact (frontend, paper, slide deck) may deviate from
what is recorded here without a version bump.

---

## Table of Contents

1. [Composite Model](#1-composite-model)
2. [Score Interpretation](#2-score-interpretation)
3. [Axis Registry — Naming & Methodology Audit](#3-axis-registry--naming--methodology-audit)
4. [Cross-Channel Aggregation Rules](#4-cross-channel-aggregation-rules)
5. [Missing Data & Zero-Score Policy](#5-missing-data--zero-score-policy)
6. [Defense Axis — SK = 0 Clarification](#6-defense-axis--sk--0-clarification)
7. [API Response Schemas (JSON)](#7-api-response-schemas-json)
8. [Data Integrity](#8-data-integrity)
9. [Freeze Confirmation](#9-freeze-confirmation)

---

## 1. Composite Model

$$\text{ISI}_i = \frac{1}{6}\sum_{k=1}^{6} A_{k,i}$$

| Property | Value |
|---|---|
| **Formula** | Unweighted arithmetic mean of 6 axis scores |
| **Weights** | Equal: 1/6 per axis. No configurable weight parameter. |
| **Score range** | $[0.0, 1.0]$ per axis and composite |
| **Clamping** | Composite clamped to $[0.0, 1.0]$ post-computation (tolerance $\pm 1 \times 10^{-12}$) |
| **NaN / Inf** | Rejected at pipeline entry. Hard-fail, no imputation. |
| **Country set** | 27 EU member states. Hardcoded canonical set. |
| **Cross-axis validation** | All 6 axes must cover the identical 27-country set. Hard-fail on mismatch. |

There is no weighting mechanism, no sensitivity parameter, no Bayesian prior.
The composite is a pure average of six dependency concentration scores.

---

## 2. Score Interpretation

| ISI range | Classification | Meaning |
|---|---|---|
| 0.25+ | `highly_concentrated` | Severe supplier concentration |
| 0.15–0.25 | `moderately_concentrated` | Meaningful supplier concentration |
| 0.10–0.15 | `mildly_concentrated` | Moderate diversification |
| < 0.10 | `unconcentrated` | Well-diversified |

**Direction:** Higher ISI = higher dependency = higher vulnerability.

All axes share this directionality. A score of 0.0 means zero measured
concentration (perfect diversification or zero external dependency).
A score of 1.0 means complete concentration in a single supplier.

---

## 3. Axis Registry — Naming & Methodology Audit

### 3.1 Axis 1 — `financial`

| Field | Frozen value |
|---|---|
| **Name** | `Financial Sovereignty` |
| **Slug** | `financial` |
| **Description** | Concentration of inward banking claims and portfolio debt holdings across foreign creditor countries. |
| **Unit** | USD millions |

| Property | Detail |
|---|---|
| **Channel A** | Banking Claims Concentration — BIS Locational Banking Statistics (LBS), SDMX API. Key: `Q.S.C.A.TO1.A.5J.A..A..N`. End-of-year stock, 2024-Q4. HHI of creditor-country shares in cross-border claims. |
| **Channel B** | Portfolio Debt Concentration — IMF CPIS, `cpis_2024_raw.xlsx`. Instrument: `DEBT_SEC`. Annual 2024. HHI of holder-country shares in portfolio debt securities. |
| **Cross-channel** | Volume-weighted average: $F_i = (C_i^A \cdot W_i^A + C_i^B \cdot W_i^B) / (W_i^A + W_i^B)$. $W_A \neq W_B$ (different data sources). |
| **Fallback** | One channel missing → use available channel alone (`A_ONLY` / `B_ONLY`). Both missing → `OMITTED`. |
| **Reference period** | 2024 (Q4 for BIS, annual for CPIS) |
| **Country code mapping** | BIS: ISO-2 (GR) → Eurostat EL. CPIS: ISO-3 (GRC) → Eurostat EL. |

**Naming audit:**
- **Measured quantity:** HHI of inward financial claims concentration by creditor country.
- **Semantic overreach risk:** MEDIUM. "Financial Sovereignty" implies a broader concept (capital controls, monetary autonomy, fiscal independence). The axis measures only creditor-country concentration in two instruments.
- **Recommended frozen title:** `Financial Sovereignty` — retained as-is for v0.1. The name is understood as shorthand for "financial creditor concentration" within the ISI framework. A future version should consider renaming to `Financial Creditor Concentration` if the index is published externally.

**Locked warnings:** L-1 (BIS creditor gap), L-2 (CPIS voluntary participation, China absent), L-3 (partial channel overlap), L-4 (HR absent from CPIS).

---

### 3.2 Axis 2 — `energy`

| Field | Frozen value |
|---|---|
| **Name** | `Energy Dependency` |
| **Slug** | `energy` |
| **Description** | Concentration of fossil fuel imports (gas, oil, solid fossil fuels) across supplier countries, volume-weighted across fuel types. |
| **Unit** | varies by fuel (MIO_M3, THS_T) |

| Property | Detail |
|---|---|
| **Structure** | Three fuel pipelines (not A/B channels): gas (`nrg_ti_gas`), oil (`nrg_ti_oil`), solid fossil (`nrg_ti_sff`). All from Eurostat SDMX API. |
| **Per-fuel computation** | Product-level HHI → volume-weighted to fuel-level HHI. |
| **Cross-fuel aggregation** | Volume-weighted average: $E_i = \sum_f C_i^f \cdot V_i^f / \sum_f V_i^f$ |
| **Reference period** | 2024 (annual) |
| **Zero-volume handling** | Groups with zero total → share = 0. Geos with zero across all fuels → excluded. |

**Naming audit:**
- **Measured quantity:** HHI of fossil fuel import concentration by supplier country, volume-weighted across gas/oil/solid fossil.
- **Semantic overreach risk:** LOW. "Energy Dependency" accurately describes the axis. However, the scope is fossil-fuel-only. Nuclear fuel, electricity interconnectors, and renewables are excluded. The description field makes this explicit.
- **Recommended frozen title:** `Energy Dependency` — retained as-is.

**Locked warnings:** L-1 (pipeline/LNG not separated), L-2 (re-exports/transit), L-3 (no price/contract effects).

---

### 3.3 Axis 3 — `technology`

| Field | Frozen value |
|---|---|
| **Name** | `Technology / Semiconductor Dependency` |
| **Slug** | `technology` |
| **Description** | Concentration of semiconductor imports across supplier countries, with category-level decomposition. |
| **Unit** | EUR |

| Property | Detail |
|---|---|
| **Channel A** | Aggregate Supplier Concentration — Eurostat Comext `ds-045409`. CN8-level semiconductor imports (HS 8541 subcodes + HS 8542). 3-year pooled (2022–2024). HHI of supplier-country shares. |
| **Channel B** | Category-Weighted Supplier Concentration — same dataset. Categories: `legacy_discrete`, `legacy_components`, `integrated_circuits`. Volume-weighted per-category HHIs. |
| **Cross-channel** | Volume-weighted, but $W_A = W_B$ by construction → arithmetic mean: $T_i = (C_i^A + C_i^B) / 2$. |
| **HS codes** | 85411000, 85412100, 85412900, 85413000 (legacy discrete); 85416000, 85419000 (legacy components); 8542 (integrated circuits, HS4). |
| **Defensive guard** | HS 854140xx (solar PV cells) → FATAL error. |
| **Reference period** | 2022–2024 (3 years pooled) |

**Naming audit:**
- **Measured quantity:** HHI of semiconductor import concentration by supplier country.
- **Semantic overreach risk:** HIGH. "Technology" is vastly broader than semiconductors. The axis measures only HS 8541/8542 import concentration. Software, AI, cloud, quantum, biotech — all absent.
- **Recommended frozen title:** `Technology / Semiconductor Dependency` — the slash disambiguates, but the slug `technology` alone is misleading. Retained for v0.1 with the caveat that external publications must use the full name.

**Locked warnings:** W-2 (re-export blindness), W-3 (no domestic fab capacity), W-4 (HS 8542 aggregate), W-5 (intra-EU included), W-6 (pandemic window).

---

### 3.4 Axis 4 — `defense`

| Field | Frozen value |
|---|---|
| **Name** | `Defense Industrial Dependency` |
| **Slug** | `defense` |
| **Description** | Concentration of major conventional arms imports across supplier countries and capability blocks. |
| **Unit** | SIPRI TIV |

| Property | Detail |
|---|---|
| **Channel A** | Aggregate Supplier Concentration — SIPRI Arms Transfers Database (Trade Register). 6-year pooled (2019–2024). HHI of TIV-weighted supplier-country shares. |
| **Channel B** | Capability-Block Weighted Concentration — same SIPRI data. 6 blocks: `air_power`, `land_combat`, `air_missile_defense`, `naval_combat`, `strike_missile`, `isr_support`. Per-block HHI, TIV-weighted. |
| **Cross-channel** | Volume-weighted, $W_A = W_B$ → arithmetic mean: $D_i = (C_i^A + C_i^B) / 2$. |
| **SIPRI scope** | Major conventional weapons only. Excludes: ammunition, consumables, MRO, maintenance, small arms, sustainment contracts, training. |
| **Block assignment** | Regex keyword matching on SIPRI weapon description field. |
| **Reference period** | 2019–2024 (6 years pooled) |
| **Zero-dependency rule** | See [§6](#6-defense-axis--sk--0-clarification). |

**Naming audit:**
- **Measured quantity:** HHI of major conventional arms import concentration by supplier country (SIPRI TIV).
- **Semantic overreach risk:** MEDIUM. "Defense Industrial Dependency" implies coverage of the defense industrial base (production capacity, R&D, supply chains). The axis measures only arms import concentration. A country with zero imports (domestic producer) scores 0, which is correct for concentration but says nothing about industrial capacity.
- **Recommended frozen title:** `Defense Industrial Dependency` — retained as-is. The description and L-2 warning make scope explicit. Rename to `Defense Import Concentration` only if index is published in an academic context.

**Locked warnings:** L-1 (TIV ≠ financial value), L-2 (major weapons only), L-3 (legacy contracts), L-4 (regex classification), L-5 (zero-score semantics).

---

### 3.5 Axis 5 — `critical_inputs`

| Field | Frozen value |
|---|---|
| **Name** | `Critical Inputs / Raw Materials Dependency` |
| **Slug** | `critical_inputs` |
| **Description** | Concentration of critical raw material imports across supplier countries, with material-group decomposition. |
| **Unit** | EUR |

| Property | Detail |
|---|---|
| **Channel A** | Aggregate Supplier Concentration — Eurostat Comext `ds-045409` (CN8). 66 CN8 codes mapped to 5 material groups. 3-year pooled (2022–2024). HHI of supplier-country shares. |
| **Channel B** | Material-Group Weighted Supplier Concentration — same dataset. Groups: `rare_earths`, `battery_metals`, `defense_industrial_metals`, `semiconductor_inputs`, `fertilizer_chokepoints`. Volume-weighted per-group HHIs. |
| **Cross-channel** | Volume-weighted, $W_A = W_B$ → arithmetic mean: $M_i = (C_i^A + C_i^B) / 2$. |
| **Zero-volume** | FATAL if any EU-27 country has zero total. FATAL if all groups zero. |
| **Reference period** | 2022–2024 (3 years pooled) |

**Naming audit:**
- **Measured quantity:** HHI of critical raw material import concentration by supplier country (66 CN8 codes, 5 material groups).
- **Semantic overreach risk:** LOW. "Critical Inputs / Raw Materials Dependency" accurately describes the axis. The CN8 scope is specific and documented.
- **Recommended frozen title:** `Critical Inputs / Raw Materials Dependency` — retained as-is.

**Locked warnings:** L-1 (re-export masking, HIGH), L-2 (small-economy amplification), L-3 (upstream-only CN8 scope), L-4 (confidential suppression).

---

### 3.6 Axis 6 — `logistics`

| Field | Frozen value |
|---|---|
| **Name** | `Logistics / Freight Dependency` |
| **Slug** | `logistics` |
| **Description** | Concentration of international freight across transport modes and bilateral freight partners per mode. |
| **Unit** | THS_T (thousand tonnes) |

| Property | Detail |
|---|---|
| **Channel A** | Transport Mode Concentration — Eurostat freight: `tran_hv_frmod` (road loaded + unloaded), `tran_r_frgo` (rail), `iww_go_atygo` (IWW, aggregate), `mar_sg_am_cw` (maritime, aggregate). 2022–2024 pooled. HHI across 4 modes: road, rail, iww, maritime. |
| **Channel B** | Partner Concentration per Transport Mode — bilateral flows only. Road and rail ONLY (IWW and maritime: no bilateral partner data in Eurostat). Volume-weighted per-mode partner HHIs. |
| **Cross-channel** | Volume-weighted: $L_i = (C_i^A \cdot W_i^A + C_i^B \cdot W_i^B) / (W_i^A + W_i^B)$. $W_A \neq W_B$ by construction (A includes IWW+maritime tonnage, B is road+rail only). |
| **Structural constraints** | MT: maritime only. CY: road+maritime. AT, CZ, HU, LU, SK: road+rail (landlocked). |
| **Reference period** | 2022–2024 (3 years pooled) |

**Naming audit:**
- **Measured quantity:** HHI of freight concentration across transport modes and bilateral freight partners.
- **Semantic overreach risk:** LOW-MEDIUM. "Logistics / Freight Dependency" is appropriate. The axis does not capture chokepoints (Suez, Bosporus), supply chain resilience, or warehousing. The description is accurate.
- **Recommended frozen title:** `Logistics / Freight Dependency` — retained as-is.

**Locked warnings:** W-1 (entrepot/hub masking, HIGH), W-2 (geographic determinism), W-3 (maritime-energy overlap), W-4 (tonnage blindness), W-5 (no route/chokepoint data).

---

### 3.7 Axis Naming Summary

| # | Frozen name | Slug | What it actually measures | Overreach risk | Action |
|---|---|---|---|---|---|
| 1 | Financial Sovereignty | `financial` | HHI of inward banking/debt creditor concentration | MEDIUM | Retain for v0.1 |
| 2 | Energy Dependency | `energy` | HHI of fossil fuel import supplier concentration | LOW | Retain |
| 3 | Technology / Semiconductor Dependency | `technology` | HHI of HS 8541/8542 import supplier concentration | HIGH | Retain full name; never use slug alone externally |
| 4 | Defense Industrial Dependency | `defense` | HHI of SIPRI TIV arms import supplier concentration | MEDIUM | Retain |
| 5 | Critical Inputs / Raw Materials Dependency | `critical_inputs` | HHI of 66 CN8 critical material import supplier concentration | LOW | Retain |
| 6 | Logistics / Freight Dependency | `logistics` | HHI of freight mode + bilateral partner concentration | LOW-MEDIUM | Retain |

---

## 4. Cross-Channel Aggregation Rules

All axes follow the same general pattern:

$$\text{Axis}_i = \frac{C_i^A \cdot W_i^A + C_i^B \cdot W_i^B}{W_i^A + W_i^B}$$

| Axis | $W_A = W_B$? | Effective formula | Fallback |
|---|---|---|---|
| 1 — Financial | **No** (BIS ≠ CPIS volumes) | Volume-weighted average | A_ONLY / B_ONLY / OMITTED |
| 2 — Energy | N/A (3 fuels, not A/B) | Volume-weighted across fuels and products | Excluded if zero across all fuels |
| 3 — Technology | **Yes** (same Comext data) | Arithmetic mean | Reduce to available channel |
| 4 — Defense | **Yes** (same SIPRI data) | Arithmetic mean | Reduce to available channel; zero-dep rule |
| 5 — Critical Inputs | **Yes** (same Comext data) | Arithmetic mean | FATAL if zero |
| 6 — Logistics | **No** (A includes IWW+maritime) | Volume-weighted average | A_ONLY / B_ONLY / HARD FAIL |

---

## 5. Missing Data & Zero-Score Policy

### 5.1 Pipeline-Level (Aggregator)

**Zero tolerance.** The composite aggregator (`aggregate_isi_v01.py`) hard-fails on:

- Any input file missing from disk
- Any file with zero data rows
- Column schema mismatch
- Any country code not in canonical EU-27
- Duplicate country codes
- Any EU-27 country absent from any axis
- Any score that is empty, non-numeric, NaN, Inf, negative, or > 1.0
- Cross-axis mismatch (different country sets)

**There is no imputation, no fallback, no partial output at the composite level.**

### 5.2 Adapter-Level (Safety Net)

The adapter (`create_axis_adapters.py`) has a dormant imputation mechanism:

- If ≥ 20/27 EU-27 countries present → impute missing with EU-27 mean
- If < 20/27 → hard-fail
- If 27/27 → no action needed

**In v0.1, this path never triggers.** All 6 axes produce 27/27 scores upstream.
The imputation mechanism is retained as a safety net for future axes but is
documented here as DORMANT and UNUSED.

### 5.3 Zero-Score Treatment

A score of 0.0 is a **valid, meaningful value**, not a missing indicator.

| Context | Score | Meaning |
|---|---|---|
| Defense axis, no bilateral SIPRI suppliers | 0.0 | Zero external concentration = domestic production or joint EU procurement |
| Any axis, perfectly diversified suppliers | 0.0 | HHI minimum = many equally-weighted suppliers |
| Missing data | N/A | Pipeline aborts. Never produces output. |

---

## 6. Defense Axis — SK = 0 Clarification

### The Rule

Countries with **zero bilateral SIPRI supplier entries** in the 2019–2024
Trade Register receive a defense dependency score of **0.0** (not missing,
not imputed, not estimated).

This applies to any EU-27 country where both channels have zero TIV volume.
The flag `score_basis = "NO_BILATERAL_SUPPLIERS"` is recorded in the audit trail.

### Why This Is Methodologically Correct

The defense axis measures **import supplier concentration** using the
Herfindahl-Hirschman Index (HHI). The HHI of an empty set is defined as 0.
A country that imports zero major conventional weapons from external bilateral
suppliers has, by definition, zero import concentration.

This covers three real-world scenarios:
1. **Domestic manufacturing** — the country produces its own weapons.
2. **Licensed production** — weapons are built domestically under foreign license (transfers recorded differently in SIPRI).
3. **Joint EU procurement** — multinational programs (e.g., Eurofighter consortium) where no single bilateral supplier is recorded.

### What This Does NOT Mean

- It does NOT mean the country has no defense dependencies.
- It does NOT mean the country has a sovereign defense industrial base.
- It does NOT mean the country's defense posture is secure.
- SIPRI explicitly excludes: ammunition, small arms, MRO, sustainment, training, software.

### Countries Affected in v0.1

Based on the 2019–2024 SIPRI Trade Register: **SK (Slovakia)** is the primary
case. The L-5 warning on Axis 4 documents this explicitly.

### Locked Decision

The zero-dependency semantic is **frozen for v0.1**. Changing it would require
a version bump. The rationale is recorded in this section and in the
`dependency_semantic` field of the axis audit data.

---

## 7. API Response Schemas (JSON)

### 7.1 `GET /health`

Primitive liveness probe. No file I/O. No rate limit. Always HTTP 200.

```json
{
  "status": "ok"
}
```

| Field | Type | Constraint |
|---|---|---|
| `status` | `string` | Always `"ok"` |

---

### 7.2 `GET /ready`

Rich readiness probe. Always HTTP 200.

```json
{
  "ready": true,
  "status": "healthy",
  "version": "0.1.0",
  "data_present": true,
  "data_file_count": 38,
  "integrity_verified": true,
  "timestamp": "2025-07-11T00:00:00Z"
}
```

| Field | Type | Values |
|---|---|---|
| `ready` | `boolean` | `true` if data present AND integrity OK |
| `status` | `string` | `"healthy"` \| `"degraded"` |
| `version` | `string` | `"0.1.0"` |
| `data_present` | `boolean` | Whether core JSON files exist |
| `data_file_count` | `integer` | Count of country + axis JSON files |
| `integrity_verified` | `boolean \| null` | `null` if no manifest; else `true`/`false` |
| `timestamp` | `string` | ISO 8601 UTC |

---

### 7.3 `GET /` (API Metadata)

Returns `meta.json` verbatim.

```json
{
  "project": "Panargus / International Sovereignty Index (ISI)",
  "version": "v0.1",
  "reference_window": "2022–2024",
  "scope": "EU-27",
  "num_axes": 6,
  "num_countries": 27,
  "aggregation_rule": "unweighted_arithmetic_mean",
  "aggregation_formula": "ISI_i = (A1_i + A2_i + A3_i + A4_i + A5_i + A6_i) / 6",
  "score_range": [0.0, 1.0],
  "interpretation": "higher = more concentrated = more dependent",
  "generated_by": "export_isi_backend_v01.py"
}
```

| Field | Type |
|---|---|
| `project` | `string` |
| `version` | `string` |
| `reference_window` | `string` |
| `scope` | `string` |
| `num_axes` | `integer` |
| `num_countries` | `integer` |
| `aggregation_rule` | `string` |
| `aggregation_formula` | `string` |
| `score_range` | `array[number]` (2 elements) |
| `interpretation` | `string` |
| `generated_by` | `string` |

---

### 7.4 `GET /isi` (Composite Scores)

Returns `isi.json` verbatim.

```json
{
  "version": "v0.1",
  "window": "2022–2024",
  "aggregation_rule": "unweighted_arithmetic_mean",
  "formula": "ISI_i = (A1_i + ... + A6_i) / 6",
  "countries_complete": 27,
  "countries_total": 27,
  "statistics": {
    "min": 0.0,
    "max": 1.0,
    "mean": 0.5
  },
  "countries": [
    {
      "country": "AT",
      "country_name": "Austria",
      "axis_1_financial": 0.1234567890,
      "axis_2_energy": 0.1234567890,
      "axis_3_technology": 0.1234567890,
      "axis_4_defense": 0.1234567890,
      "axis_5_critical_inputs": 0.1234567890,
      "axis_6_logistics": 0.1234567890,
      "isi_composite": 0.1234567890,
      "classification": "moderately_concentrated",
      "complete": true
    }
  ]
}
```

| Field | Type | Notes |
|---|---|---|
| `version` | `string` | |
| `window` | `string` | |
| `aggregation_rule` | `string` | |
| `formula` | `string` | |
| `countries_complete` | `integer` | |
| `countries_total` | `integer` | Always 27 |
| `statistics.min` | `number` | |
| `statistics.max` | `number` | |
| `statistics.mean` | `number` | |
| `countries[]` | `array` | 27 elements |
| `countries[].country` | `string` | ISO 3166-1 alpha-2 (EL for Greece) |
| `countries[].country_name` | `string` | English name |
| `countries[].axis_1_financial` | `number` | $[0, 1]$ |
| `countries[].axis_2_energy` | `number` | $[0, 1]$ |
| `countries[].axis_3_technology` | `number` | $[0, 1]$ |
| `countries[].axis_4_defense` | `number` | $[0, 1]$ |
| `countries[].axis_5_critical_inputs` | `number` | $[0, 1]$ |
| `countries[].axis_6_logistics` | `number` | $[0, 1]$ |
| `countries[].isi_composite` | `number` | Unweighted mean |
| `countries[].classification` | `string` | Enum: see §2 |
| `countries[].complete` | `boolean` | All 6 axes present |

---

### 7.5 `GET /countries`

Returns `countries.json` verbatim. **Root is an array**, not an object.

```json
[
  {
    "country": "AT",
    "country_name": "Austria",
    "axis_1_financial": 0.123,
    "axis_2_energy": 0.123,
    "axis_3_technology": 0.123,
    "axis_4_defense": 0.123,
    "axis_5_critical_inputs": 0.123,
    "axis_6_logistics": 0.123,
    "isi_composite": 0.123
  }
]
```

Same schema as `GET /isi` → `countries[]` but **without** `classification` and `complete`.

---

### 7.6 `GET /country/{code}` (Full Country Detail)

Returns `country/{CODE}.json` verbatim.

```json
{
  "country": "SK",
  "country_name": "Slovakia",
  "version": "v0.1",
  "window": "2022–2024",
  "isi_composite": 0.123,
  "isi_classification": "moderately_concentrated",
  "axes_available": 6,
  "axes_required": 6,
  "axes": [
    {
      "axis_id": 4,
      "axis_slug": "defense",
      "axis_name": "Defense Industrial Dependency",
      "score": 0.0,
      "classification": "unconcentrated",
      "driver_statement": "...",
      "audit": {
        "channel_a_concentration": 0.0,
        "channel_a_volume": 0.0,
        "channel_b_concentration": 0.0,
        "channel_b_volume": 0.0,
        "score": 0.0,
        "basis": "NO_BILATERAL_SUPPLIERS",
        "dependency_semantic": "no_bilateral_suppliers"
      },
      "channels": [
        {
          "channel_id": "A",
          "channel_name": "Aggregate Supplier Concentration",
          "source": "SIPRI Arms Transfers Database",
          "top_partners": [],
          "total_partners": 0
        }
      ],
      "warnings": [
        {
          "id": "L-5",
          "severity": "LOW",
          "text": "Countries with no bilateral SIPRI supplier entries are assigned score=0..."
        }
      ]
    }
  ]
}
```

**Top-level fields:**

| Field | Type |
|---|---|
| `country` | `string` |
| `country_name` | `string` |
| `version` | `string` |
| `window` | `string` |
| `isi_composite` | `number` |
| `isi_classification` | `string` |
| `axes_available` | `integer` |
| `axes_required` | `integer` |
| `axes` | `array` (6 elements) |

**`axes[]` object:**

| Field | Type | Presence |
|---|---|---|
| `axis_id` | `integer` | Always (1–6) |
| `axis_slug` | `string` | Always |
| `axis_name` | `string` | Always |
| `score` | `number` | Always ($[0, 1]$) |
| `classification` | `string` | Always |
| `driver_statement` | `string` | Always |
| `audit` | `object` | Optional (present on most axes) |
| `audit.channel_a_concentration` | `number` | |
| `audit.channel_a_volume` | `number` | |
| `audit.channel_b_concentration` | `number` | |
| `audit.channel_b_volume` | `number` | |
| `audit.score` | `number` | |
| `audit.basis` | `string` | |
| `audit.dependency_semantic` | `string` | Optional (defense axis) |
| `fuel_concentrations` | `object` | Axis 2 only |
| `fuel_concentrations.gas` | `number` | |
| `fuel_concentrations.oil` | `number` | |
| `fuel_concentrations.solid_fossil` | `number` | |
| `channels` | `array` | Always |
| `warnings` | `array` | Always |

**`channels[]` object:**

| Field | Type | Presence |
|---|---|---|
| `channel_id` | `string` | Always |
| `channel_name` | `string` | Always |
| `source` | `string` | Always |
| `top_partners` | `array` | Optional |
| `top_partners[].partner` | `string` | |
| `top_partners[].share` | `number` | |
| `total_partners` | `integer` | Optional (with top_partners) |
| `subcategories` | `array` | Optional (axis 3/5 ch. B) |
| `subcategories[].category` | `string` | |
| `subcategories[].concentration` | `number` | |
| `subcategories[].volume` | `number` | |

**`warnings[]` object:**

| Field | Type |
|---|---|
| `id` | `string` |
| `severity` | `string` (`HIGH` / `MEDIUM` / `LOW`) |
| `text` | `string` |

---

### 7.7 `GET /country/{code}/axes` (Axis Summary)

Constructed inline. Strict subset of full country detail.

```json
{
  "country": "AT",
  "country_name": "Austria",
  "isi_composite": 0.123,
  "axes": [
    {
      "axis_id": 1,
      "axis_slug": "financial",
      "score": 0.123,
      "classification": "moderately_concentrated"
    }
  ]
}
```

No `axis_name`, no `driver_statement`, no `audit`, no `channels`, no `warnings`.

---

### 7.8 `GET /country/{code}/axis/{n}` (Single Axis Detail)

Constructed inline. Wraps one axis object from the country JSON.

```json
{
  "country": "AT",
  "country_name": "Austria",
  "axis": { }
}
```

The `axis` object is **identical** to a single element of `axes[]` from
`GET /country/{code}` — full structure including `audit`, `channels`, `warnings`.

---

### 7.9 `GET /axes` (Axis Registry)

Returns `axes.json` verbatim. **Root is an array.**

```json
[
  {
    "id": 1,
    "slug": "financial",
    "name": "Financial Sovereignty",
    "description": "...",
    "unit": "USD millions",
    "version": "v0.1",
    "status": "FROZEN",
    "materialized": true,
    "channels": [
      { "id": "A", "name": "Banking Claims Concentration", "source": "BIS Locational Banking Statistics (LBS)" }
    ],
    "warnings": [
      { "id": "L-1", "severity": "MEDIUM", "text": "..." }
    ]
  }
]
```

| Field | Type |
|---|---|
| `[].id` | `integer` (1–6) |
| `[].slug` | `string` |
| `[].name` | `string` |
| `[].description` | `string` |
| `[].unit` | `string` |
| `[].version` | `string` |
| `[].status` | `string` (always `"FROZEN"`) |
| `[].materialized` | `boolean` (always `true`) |
| `[].channels` | `array` |
| `[].channels[].id` | `string` |
| `[].channels[].name` | `string` |
| `[].channels[].source` | `string` |
| `[].warnings` | `array` |

---

### 7.10 `GET /axis/{n}` (Full Axis Detail)

Returns `axis/{n}.json` verbatim.

```json
{
  "axis_id": 4,
  "axis_slug": "defense",
  "axis_name": "Defense Industrial Dependency",
  "description": "...",
  "version": "v0.1",
  "status": "FROZEN",
  "materialized": true,
  "unit": "SIPRI TIV",
  "countries_scored": 27,
  "statistics": { "min": 0.0, "max": 1.0, "mean": 0.5 },
  "channels": [ { "id": "A", "name": "...", "source": "..." } ],
  "warnings": [ { "id": "L-1", "severity": "MEDIUM", "text": "..." } ],
  "countries": [
    {
      "country": "SK",
      "country_name": "Slovakia",
      "score": 0.0,
      "classification": "unconcentrated",
      "audit": {
        "channel_a_concentration": 0.0,
        "channel_a_volume": 0.0,
        "channel_b_concentration": 0.0,
        "channel_b_volume": 0.0,
        "score": 0.0,
        "basis": "NO_BILATERAL_SUPPLIERS",
        "dependency_semantic": "no_bilateral_suppliers"
      }
    }
  ]
}
```

| Field | Type | Notes |
|---|---|---|
| `axis_id` | `integer` | |
| `axis_slug` | `string` | |
| `axis_name` | `string` | |
| `description` | `string` | |
| `version` | `string` | |
| `status` | `string` | Always `"FROZEN"` |
| `materialized` | `boolean` | Always `true` |
| `unit` | `string` | |
| `countries_scored` | `integer` | 27 |
| `statistics` | `object` | `min`, `max`, `mean` — all `number` |
| `channels` | `array` | Channel metadata |
| `warnings` | `array` | Axis warnings |
| `countries` | `array` | 27 elements, sorted by score descending |
| `countries[].country` | `string` | |
| `countries[].country_name` | `string` | |
| `countries[].score` | `number` | $[0, 1]$ |
| `countries[].classification` | `string` | |
| `countries[].audit` | `object` | Always present |
| `countries[].audit.dependency_semantic` | `string` | May be empty string `""` |

---

### 7.11 Error Responses

All data endpoints (not `/health`) return on error:

```json
{ "detail": "..." }
```

| HTTP Status | Condition |
|---|---|
| 404 | Invalid country code or axis ID |
| 429 | Rate limit exceeded (`Retry-After: 60` header) |
| 500 | Unhandled server exception |
| 503 | Data file not materialized |

---

## 8. Data Integrity

### 8.1 Manifest

`backend/v01/MANIFEST.json` contains SHA-256 hashes for all 37 data artefacts
(27 country JSONs + 6 axis JSONs + `isi.json` + `countries.json` + `axes.json` + `meta.json`).

### 8.2 Verification

`verify_manifest()` in `backend/security.py` computes SHA-256 of each file
at startup and compares against the manifest. Any mismatch → `integrity_verified = false`
in `/ready` response. The API continues to serve (degraded mode) but the
integrity failure is visible.

### 8.3 File Count

38 total files tracked in git under `backend/v01/`:
- 27 country JSONs (`country/{CODE}.json`)
- 6 axis JSONs (`axis/{1..6}.json`)
- `isi.json`
- `countries.json`
- `axes.json`
- `meta.json`
- `MANIFEST.json`

---

## 9. Freeze Confirmation

### What is frozen

| Artefact | Status |
|---|---|
| Composite formula ($\frac{1}{6}\sum A_k$) | FROZEN |
| Equal weights (1/6 per axis) | FROZEN |
| Score range $[0, 1]$ | FROZEN |
| EU-27 scope (27 countries, EL for Greece) | FROZEN |
| All 6 axis names, slugs, descriptions | FROZEN |
| All channel definitions and data sources | FROZEN |
| All warning texts and IDs | FROZEN |
| Zero-dependency semantic (defense SK = 0) | FROZEN |
| JSON response schemas (§7) | FROZEN |
| MANIFEST.json SHA-256 hashes | FROZEN |
| Classification thresholds (§2) | FROZEN |

### What may change without a version bump

| Artefact | Reason |
|---|---|
| `Dockerfile` CMD / port binding | Infrastructure, not model |
| Middleware configuration (rate limits, headers) | Security, not model |
| `/health` and `/ready` response fields | Operational, not model |
| Gunicorn worker count / timeouts | Performance, not model |
| Error message text in `detail` field | UX, not model |

### What requires a version bump (v0.2+)

- Adding, removing, or reweighting any axis
- Changing the composite formula
- Changing any data source or reference period
- Changing the EU-27 scope
- Changing zero-score semantics
- Adding imputation at the composite level
- Changing classification thresholds
- Altering the JSON response schema (adding/removing/renaming fields)

---

*End of ISI v0.1 Formal Model Specification.*
